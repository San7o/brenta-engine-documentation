<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ECs Engine: Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ECs Engine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Guide</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a> Welcome to this quick guide on most of the features of the engine. For each feature, an example with context will be shown. Enjoy the read :)</p>
<h1><a class="anchor" id="autotoc_md1"></a>
üïµÔ∏è‚Äç‚ôÇÔ∏è How it works</h1>
<p>The <code>World</code> contains <code>Entities</code>. You can add <code>Components</code> to entities, which are their "properties" (like Health, Position, Mesh). You interact with those components through <code>Systems</code> by making <code>Queries</code>. There are also <code>Resources</code> that store global data. Components, Systems and Resources are identified by a name, while entities are defined with an ID.</p>
<p>Let's take a deeper look:</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Main loop</h2>
<p>The engine provides functions to interact with the window in <code>ECS::Screen</code>, some OpenGL helper functions in <code>ECS::GL</code>, a nice <code>ECS::Logger</code>, input handling with <code>ECS::Input</code>, manage time with <code>ECS::Time</code>, display text with <code>ECS::Text</code> and more!</p>
<p>The main loop calls <code>World::Tick()</code>. At each tick, all the Systems will be called in the order they were added in the World.</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="preprocessor">#include &quot;engine.h&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span>ECS;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Set Log level, default = WARNING */</span></div>
<div class="line">    Logger::SetLogLevel(Types::LogLevel::INFO);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize the screen */</span></div>
<div class="line">    Screen::Init(SCR_WIDTH, SCR_HEIGHT);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Load OpenGL */</span></div>
<div class="line">    GL::LoadOpenGL();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize the world */</span></div>
<div class="line">    World::Init();</div>
<div class="line"> </div>
<div class="line">    InitPlayer();</div>
<div class="line">    InitRenderer();</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span>(!Screen::isWindowClosed()) {</div>
<div class="line"> </div>
<div class="line">        GL::SetColor(0.2f, 0.3f, 0.3f, 1.0f);</div>
<div class="line">        GL::Clear();</div>
<div class="line"> </div>
<div class="line">        World::Tick();</div>
<div class="line"> </div>
<div class="line">        Screen::PollEvents();</div>
<div class="line">        Screen::SwapBuffers();</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    World::Delete();</div>
<div class="line">    Screen::Terminate();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3"></a>
Component</h2>
<p>A Component is a piece of data (more precisely, a struct) that gets assigned to an Entity.</p>
<p>You can define your own component like so:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="comment">/* This is a component */</span></div>
<div class="line"><span class="keyword">struct </span>ModelComponent : Types::Component {</div>
<div class="line">    Model model;</div>
<div class="line">    Types::ShaderName shader;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* I added a constructor for ease of use */</span></div>
<div class="line">    ModelComponent(Model model, Types::ShaderName shader)</div>
<div class="line">            : model(model), shader(shader) {}</div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
System</h2>
<p>A System is a function that gets called at each Tick in the reder loop. It contains all the logic of the World. You will interact with the Entities, Components and Resources via <code>World::QueryComponents({"component1", "component2", ...})</code>, <code>World::EntityToComponent(Entity e)</code> and <code>World::GetResource("resourceName")</code>.</p>
<p>Here is an example:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="comment">/* A system is composed of a name and a function */</span></div>
<div class="line"><span class="keyword">auto</span> renderer = std::make_shared&lt;System&gt;(<span class="stringliteral">&quot;Renderer&quot;</span>, []() {</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get the entities with the model component */</span></div>
<div class="line">    <span class="keyword">auto</span> matches = World::QueryComponents({<span class="stringliteral">&quot;ModelComponent&quot;</span>});</div>
<div class="line">    <span class="keywordflow">if</span> (matches.empty()) <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> match : matches) {</div>
<div class="line">        <span class="comment">/* Get the model component */</span></div>
<div class="line">        <span class="keyword">auto</span> model_component = <span class="keyword">static_cast&lt;</span>ModelComponent*<span class="keyword">&gt;</span></div>
<div class="line">             (World::EntityToComponent(match, <span class="stringliteral">&quot;ModelComponent&quot;</span>));</div>
<div class="line">        </div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Translate the model */</span></div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">        </div>
<div class="line"> </div>
<div class="line">        myModel.Draw(default_shader);</div>
<div class="line">    }</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">World::AddSystem(renderer);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5"></a>
Entity</h2>
<p>You can create Entities and assign Components to them like so:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="comment">/* Create the player entity */</span></div>
<div class="line"><span class="keyword">auto</span> player_entity = World::NewEntity();</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Add the player component to the player entity */</span></div>
<div class="line"><span class="keyword">auto</span> player_component = std::make_shared&lt;PlayerComponent&gt;();</div>
<div class="line">World::AddComponent(player_entity, <span class="stringliteral">&quot;PlayerComponent&quot;</span>, player_component);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Load model and shader */</span></div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Add the model component to the player entity */</span></div>
<div class="line"><span class="keyword">auto</span> model_component = std::make_shared&lt;ModelComponent&gt;(model, <span class="stringliteral">&quot;default_shader&quot;</span>);</div>
<div class="line">World::AddComponent(player_entity, <span class="stringliteral">&quot;ModelComponent&quot;</span>, model_component);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md6"></a>
Resources</h2>
<p>Resources hold global data accessible via <code>World::GetResource("name")</code>. You can define a Resource like so:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="comment">/* This is a resource */</span></div>
<div class="line"><span class="keyword">struct </span>WireframeResource : Types::Resource {</div>
<div class="line">    <span class="keywordtype">bool</span> enabled;</div>
<div class="line">    WireframeResource(<span class="keywordtype">bool</span> e) : enabled(e) {}</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> wireframe_resource = std::make_shared&lt;WireframeResource&gt;(<span class="keyword">false</span>);</div>
<div class="line">World::AddResource(<span class="stringliteral">&quot;WireframeResource&quot;</span>, wireframe_resource);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md7"></a>
Callbacks</h2>
<p>Callbacks are funcitons that are called when the specified <code>key</code> is pressed, the code responsible for this is in <code>ECS::Input</code>. Here is an example: </p><div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="keyword">auto</span> toggle_wireframe_callback = []() {</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> wireframe = <span class="keyword">static_cast&lt;</span>WireframeResource*<span class="keyword">&gt;</span>(World::GetResource(<span class="stringliteral">&quot;WireframeResource&quot;</span>));</div>
<div class="line">    <span class="keywordflow">if</span> (wireframe == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    GL::SetPoligonMode(!wireframe-&gt;enabled);</div>
<div class="line">    wireframe-&gt;enabled = !wireframe-&gt;enabled;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">Input::AddCallback(GLFW_KEY_F, toggle_wireframe_callback);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md8"></a>
Audio</h2>
<p>There is a simple-to-use audio API in <code>ECS::Audio</code>. You can load sound files, create channels and play a sound on a channel. There can be only one sound playing per channel, but of course there can be multiple channels playing so some channel management from the developer is needed:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line">Audio::LoadAudio(<span class="stringliteral">&quot;guitar&quot;</span>, std::filesystem::absolute(<span class="stringliteral">&quot;assets/audio/guitar.wav&quot;</span>));</div>
<div class="line">Audio::PlayAudio(<span class="stringliteral">&quot;guitar&quot;</span>); <span class="comment">/* This will use the &quot;default_stream&quot;, or you can specify</span></div>
<div class="line"><span class="comment">                               a particular stream */</span></div>
<div class="line"> </div>
<div class="line">Audio::CreateStream(<span class="stringliteral">&quot;background_music&quot;</span>);</div>
<div class="line">Audio::PlayAudio(<span class="stringliteral">&quot;guitar&quot;</span>, <span class="stringliteral">&quot;background_music&quot;</span>);</div>
</div><!-- fragment --><p>There are many other examples in the <code>examples</code> directory and in the <code>game</code> which is guaranteed to be updated to the lastest APIs.</p>
<p>Here is an high lievel simplified view of those objects:</p>
<p><img src="https://github.com/user-attachments/assets/d76b238d-56f1-4b57-8140-400af6ed1d23" alt="image" class="inline"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
