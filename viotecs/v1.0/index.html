<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>viotecs: Viotecs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">viotecs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Viotecs </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Viotecs (viotECS) is the official ECS of the Brenta Engine. The library can be used as a standalone module for your applications, It does not depend on the engine.</p>
<h1><a class="anchor" id="ecs"></a>
Entity Component System</h1>
<p>The ECS is a design pattern that allows you to structure your code in a way that is more modular and scalable.</p>
<p>The ECS is composed of four main parts:</p><ul>
<li><b>Entity</b>: an entity is an object in the game, it is just an ID</li>
<li><b>Component</b>: a component is a piece of data that is attached to an entity</li>
<li><b>System</b>: a system is a piece of code that operates on entities with specific components. They get autocamically executed at each game tick.</li>
<li><b>Resources</b>: resources are shared global data that can be accessed by any system</li>
</ul>
<p>With those building blocks, you can create any game or application. We will go more in depth on how to use the ECS in the following sections.</p>
<h2><a class="anchor" id="install"></a>
Installation</h2>
<p>To use the viotecs, you need to include the headers from the <code>include</code> directory and add <code>src/viotecs.cpp</code> to your sources in your project. The ECS uses <a href="https://github.com/San7o/oak">Oak</a> for logging, which must be included in your project as well.</p>
<p>If you use CPM, you can add the following to your <code>CMakeLists.txt</code>: </p><div class="fragment"><div class="line">CPMAddPackage(</div>
<div class="line">    NAME viotecs</div>
<div class="line">    GITHUB_REPOSITORY San7o/viotecs</div>
<div class="line">    GIT_TAG v1.0.0</div>
<div class="line">    DOWNLOAD_ONLY True</div>
<div class="line">)</div>
</div><!-- fragment --><p>To use the ECS, just include the <code><a class="el" href="viotecs_8hpp.html">viotecs/viotecs.hpp</a></code> header: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="viotecs_8hpp.html">viotecs/viotecs.hpp</a>&quot;</span></div>
<div class="ttc" id="aviotecs_8hpp_html"><div class="ttname"><a href="viotecs_8hpp.html">viotecs.hpp</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="world"></a>
The World</h1>
<p>Everything that exists in the ECS is contained in the <code>World</code> class. The World is a singleton accessible from anywhere in the code and It will be your entry point to the ECS. You can create entities, assign components to them, and query entities with specific components. Let's take a look on how to use the World API.</p>
<h1><a class="anchor" id="entity"></a>
Creating new Entities</h1>
<p>Creating an entity is very straightforward, you can ask the world to create one for you: </p><div class="fragment"><div class="line">entity_t entity = world::new_entity();</div>
</div><!-- fragment --><p> This will return a new entity with a unique ID or -1 if the entity could not be created.</p>
<h1><a class="anchor" id="component"></a>
Assigning Components to Entities</h1>
<p>To assign a component to an entity, first you need to create a component. Components are just structs with data that extend the <code>Component</code> class. Note that you need to implement a default empty constructor for your component.</p>
<p>For example: </p><div class="fragment"><div class="line"><span class="keyword">struct </span>position_component : <span class="keyword">public</span> component {</div>
<div class="line">    <span class="keywordtype">float</span> x, y, z;</div>
<div class="line">    position_component(); <span class="comment">// Required</span></div>
<div class="line">    position_component(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z); <span class="comment">// Optional</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>You can find many more examples in <code>examples/components.cpp</code>.</p>
<p>Once you have created a component, you can assign it to an entity: </p><div class="fragment"><div class="line">position_component position(0.0f, 0.0f, 0.0f);</div>
<div class="line">world::add_component&lt;position_component&gt;(entity, position);</div>
</div><!-- fragment --><h1><a class="anchor" id="system"></a>
Creating Systems</h1>
<p>Systems are classes that extend the <code>system</code> class. Systems can query entities with specific components and operate on them. They have a run method that will be called at each tick. Systems can define which components to query by specifying them in the template arguments (see the example below), they will receive a vector of entities that match the query.</p>
<p><b>Note</b> that if your System does not need to query any component, you need to pass <code>None</code> as the template argument.</p>
<p>You can create a system like so:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>renderer_system : system&lt;model_component, transform_component&gt; {</div>
<div class="line">  <span class="comment">// you need to implement the run method</span></div>
<div class="line">  <span class="keywordtype">void</span> run(std::vector&lt;entity_t&gt; matches)<span class="keyword"> const override </span>{</div>
<div class="line">    <span class="keywordflow">if</span> (matches.empty()) <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> match : matches) {</div>
<div class="line">        <span class="comment">// get the components associated to an entity</span></div>
<div class="line">        <span class="keyword">auto</span> model_component =</div>
<div class="line">               world::entity_to_component&lt;model_component&gt;(match);</div>
<div class="line">        <span class="keyword">auto</span> my_model = model_component-&gt;mod;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line">        my_model.draw(default_shader);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">};</div>
</div><!-- fragment --><p> Note how we used <code>world::entity_to_component</code> to get the components associated with an entity. This is a common pattern you will use in your systems.</p>
<p>After you defined your system, you need to register it. This can be done throught a macro: </p><div class="fragment"><div class="line"><a class="code hl_define" href="system_8hpp.html#a3de0c7b1b1a5e98c6188e87bd35c85da">REGISTER_SYSTEMS</a>(renderer_system);</div>
<div class="ttc" id="asystem_8hpp_html_a3de0c7b1b1a5e98c6188e87bd35c85da"><div class="ttname"><a href="system_8hpp.html#a3de0c7b1b1a5e98c6188e87bd35c85da">REGISTER_SYSTEMS</a></div><div class="ttdeci">#define REGISTER_SYSTEMS(...)</div><div class="ttdef"><b>Definition</b> <a href="system_8hpp_source.html#l00084">system.hpp:84</a></div></div>
</div><!-- fragment --><p> <b>Note</b>: You can register as many systems as you want but passing the systems as a comma separated list to the macro, but you have to use <code>REGISTER_SYSTEM</code> once and only once in your code, this is because systems are registered in a global type.</p>
<h1><a class="anchor" id="resources"></a>
Resources</h1>
<p>Resources are data, like components, but they are not associated with entities. Things like the day in the game, the number of enemies, etc should be resources.</p>
<p>You can create a resource like so: </p><div class="fragment"><div class="line"><span class="keyword">struct </span>day_resource : <span class="keyword">public</span> resource {</div>
<div class="line">   <span class="keywordtype">int</span> day;</div>
<div class="line">   day_resource() : day(0) {}</div>
<div class="line">   day_resource(<span class="keywordtype">int</span> day) : day(day) {}</div>
<div class="line">};</div>
</div><!-- fragment --><p>You can register a resource like so: </p><div class="fragment"><div class="line">world::add_resource&lt;day_resource&gt;(day_resource(1337));</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
